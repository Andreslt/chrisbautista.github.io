!function(){"use strict";function t(t){var e=this;this.numPostCardsSent=0,this.currentPage=0,this.render=t.animatePages,this.pages=Object.keys(this.render),console.log(this.pages),this.postcard=t.postcard,this.currentDesign="",this.listeners={intro:function(){$("#enterbtn").on("click",function(){e.start()})},mechanics:function(){$("#step1 .Submit").on("click",function(){e.nextPage()})},pickScent:function(){$(".scents").on("mouseover",function(){-1!==$(this).attr("src").indexOf("pg3-selectcard.png")&&$(this).attr("src","_assets/pg3-selectcard-hi.png"),$(this).on("mouseout",function(){$(this).attr("src","_assets/pg3-selectcard.png"),$(this).off("mouseout")})}).on("click",function(t){t.preventDefault(),e.postcard.setDesign($(this)[0].alt),$(".preview").attr("src","_assets/designs/"+e.postcard.getThumbNail()),$("#hrefFront").attr("href","_assets/designs/"+e.postcard.getPostcardZoom()),e.nextPage(),t.stopPropagation(),$(".scents").off()})},details:function(){$("#frmFriend").on("click",function(){alert("This should popup a selector from a list of facebook friends")}),$("frm_mobile").on("change",function(){var t=/^[0-9-+]+$/;return t.test($(this).val())?($(this).css("border",""),!0):void $(this).css("border","1px solid red")}),$("#step3 .Submit").on("click",function(t){t.preventDefault(),e.nextPage(),t.stopPropagation()})},message:function(){$("#frm_dedication").limitMaxlength({onEdit:function(t){$(this).siblings(".charsRemaining").text("Characters remaining: "+t),t>0&&$(this).css("background-color","white")},onLimit:function(){$(this).css("background-color","red")}}),$("#step4 .Submit").on("click",function(t){t.preventDefault(),e.nextPage(),t.stopPropagation()})},postcard:function(){$("#step5 .Submit").on("click",function(t){t.preventDefault(),alert("post this session to server. save."),e.numPostCardsSent+=1,$("#pg8faq").html("You have successfully sent "+e.numPostCardsSent+" postcard"+(e.numPostCardsSent>1?"s":"")+"."),e.nextPage(),t.stopPropagation()}),$(".back").fancybox({type:"ajax",padding:0,width:640,height:469,autoSize:!1,scrolling:"no",openEffect:"elastic",beforeShow:function(){var t=(new Date).toDateString().split(" ");$("#postcard").css("background-image","url('_assets/designs/"+e.postcard.getPostcardBack()+")"),$("#salute").html("Dear "+$("#frm_sendee").val().substr(0,$("#frm_fname").val().indexOf(" ",0))+","),$("#ddate").html(t[1]+" "+t[2]+", "+t[3]),$("#dedicatory").html(""+$("#frm_dedication").val()),$("#close").html($("#frm_closing").val()+",<br />"+$("#frm_sender").val()),$("#From").html("From: "+$("#frm_sender").val()),$("#To").html(""+$("#frm_fname").val()+"<br />"+$("#frm_street").val()+" "+$("#frm_province").val()+" "+$("#frm_zip").val())}}),$("#backToStart").on("click",function(t){t.preventDefault(),e.restart(),t.stopPropagation()})},summary:function(){$("#newPostcard").on("click",function(t){t.preventDefault(),e.reset(),t.stopPropagation()}),$("#share").on("click",function(){alert("Trigger facebook Share")})}}}t.prototype={getPage:function(t){return this.pages[t]},nextPage:function(){this.currentPage+=1,this.route(this.currentPage)},route:function(t){var e;t=t||0,this.setCurrentPage(t),e=this.getPage(t),this.render[e](),this.listeners[e]()},init:function(){this.route()},setCurrentPage:function(t){this.currentPage=t},reset:function(){this.route(1),this.route(2)},restart:function(){this.reset()},start:function(){this.route(1)}},window.Application=t}(),function(){"use strict";var t={mask:function(){$("#container").block({message:null,overlayCSS:{backgroundColor:"#FFF"}})},unmask:function(){$("#container").unblock()},runFancyBox:function(){$(".fancybox").fancybox()},fadeScreen:function(t,e){t.fadeOut(null,"",function(){e.removeClass("hid").fadeIn(500,"",function(){t.addClass("hid")})})}},e={intro:function(){function t(t){var n=new Image,a=$("img").map(function(){return $(this).attr("src")});n.src="_assets/loading.png",jQuery.imgpreload("_assets/loading.png",function(){$("#container").fadeOut(50),$("#msg").fadeOut(50).fadeIn(100),$("#msg").html("<strong>Starting ...</strong>")}),jQuery.imgpreload(a,{each:function(){var t=e[Math.floor(Math.random()*e.length+1)];$("#msg").delay(300).html(t)},all:function(){$("#msg").css("opacity","0"),$("#container").css("opacity","1").fadeIn(400),t()}})}var e=["listing travel plans...","planning activities...","checking local weather...","packing essentials...","checking itinerary...","mapping out route...","clearing schedule...","departing..."];t(function(){$("#msg").remove(),$("#container").addClass("intro"),setTimeout(function(){$("#container").css("opacity","1").fadeIn(400),$("#container").animate({opacity:"1"},{duration:"fast"}),$("#container").fadeIn(400),$("#logo").animate({opacity:"0",scale:0},{duration:"fast"}),$("#welcome").animate({opacity:"0",scale:0},{duration:"fast"}),$("#curtis-name").animate({opacity:"0",scale:0},{duration:"fast"}),$("#enter").animate({opacity:"0",scale:.01,left:"405px",top:"445px"},{duration:"fast"}),$("#jasmine").animate({opacity:"0",scale:1,left:"300px"},{duration:"fast"}),$("#friendtxt").animate({opacity:"0",scale:0},{duration:"fast"}),$("#sign").animate({opacity:"0",scale:0},{duration:"fast"}),$("#logo").animate({opacity:"1",scale:"1"},{duration:"slow",easing:"easeInBack",complete:function(){$("#welcome").animate({opacity:"1",scale:"1"},{duration:"slow",easing:"easeInBack"}),$("#friendtxt").animate({opacity:"1",scale:"1"},{duration:"slow",easing:"easeInBack"}),$("#curtis-name").animate({opacity:"1",scale:"1"},{duration:"slow",easing:"easeInBack"}),$("#sign").animate({opacity:"1",scale:"1"},{duration:"slow",easing:"easeInBack",complete:function(){$("#jasmine").animate({opacity:"1",left:"99px"},{duration:"slow",easing:"easeInBack",complete:function(){$("#enter").delay(800).animate({opacity:"0.3",scale:"1"},{duration:"fast"}).animate({opacity:"1",scale:"1",left:"405px",top:"445px"},{duration:"slow",easing:"easeOutBack"})}})}})}})},1500)})},mechanics:function(){$("#container").fadeOut(10).removeClass("intro").addClass("inside"),$("#container").html($("#insideContent")[0].innerHTML),$("#header-top").fadeOut(10),$("#content").fadeOut(10),setTimeout(function(){$("#container").fadeIn(500,function(){$("#header-top").fadeIn(700),$("#content").fadeIn(1200)}),t.runFancyBox()},500)},pickScent:function(){$("#step2, #step3, #step4, #step5, #step6").fadeOut(10).removeClass("hid").addClass("hid"),t.fadeScreen($("#step1"),$("#step2"))},details:function(){t.fadeScreen($("#step2"),$("#step3"))},message:function(){t.fadeScreen($("#step3"),$("#step4"))},postcard:function(){$(".fancybox").fancybox({padding:0,openEffect:"elastic"}),t.fadeScreen($("#step4"),$("#step5"))},summary:function(){t.fadeScreen($("#step5"),$("#step6"))}};window.PageRender=e}(),function(){var t={setDesign:function(t){this.design=this.getDesign(t),this.message={}},getThumbNail:function(){return this.design.thumb},getPostcardBack:function(){return this.design.back},getPostcardZoom:function(){return this.design.zoom},getDesign:function(t){var e;return"paris"==t?e={back:"_back-paris.png",thumb:"paris2-thumb.png",zoom:"paris2.jpg"}:"japan"==t?e={back:"_back-japan.png",thumb:"japan1-thumb.png",zoom:"japan1.jpg"}:"rio"==t&&(e={back:"_back-rio.png",thumb:"rio1-thumb.png",zoom:"rio1.jpg"}),e}};window.PostCard=t}(),function(){var t=new Application({animatePages:PageRender,postcard:PostCard});t.init()}();